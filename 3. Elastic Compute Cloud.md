## AWS Budget Setup

- If you click on your username on the top right corner and 
click on `Billing Dashboard`, you can set up your budget. Note that if you are an IAM user it will ask for permissions ![AWS Billing Dashboard](Images/AWS_Billing_Dashboard.png)

- To solve this login to your root account, click on `My Account`, scroll down and you will find a setting called `IAM User and Role Access to Billing Information`. Edit this and `Activate IAM Access`. Now you can login back into your IAM account and see your billing dashboard.
- When you access the dashboard, you might see that you have a charge. You can find the source of the charge by going to `Bills` on the left-hand side, click on the `Try the new Bills page experience` ![Budget Bills](Images/Budget_Bills.png)
- You will now be able to view the total interface. Scroll down and select `Charges by service`. You will be able to charges there.
- So for example, if `Elastic Cloud Compute` is deducing money, you can see it like this: ![Elastic Search Cost](Images/Elastic_Search_Cost.png) You can then click on `US East (N. Virginia)` and see in-depth details ![Elastic Search Cost Detailed](Images/Elastic_Search_Cost_Detailed.png) In this particular case, you would go to your `Elastic Compute Cloud` Console, you would switch to the `N. Virginia` region, then go to the `EBS` secion and delete the volume that is incurring charges.
- You can also click on `Free Tier` on left hand side and see how much resources you are using of the Free Tier and whether you'll start incurring charges from them.
- You can set up an alarm by going into `Budgets` on the left side and `Create budget`.
- That way you can set up a budget `using a template` and then selecting the `Zero Spend Budget` which will notify you via email when you exceed your AWS Free Tier

## Amazon EC2

- Stands for Elastic Compute Cloud, it is an Infrastructure-as-a-Service.
- It mainly consists of the capability to:

  - Rent virtual machines
  - Storing data on virtual hard drives (EBS)
  - Distributing load across machines (ELB)
  - Scaling the services using an auto-scaling group (ASG)

## EC2 sizing and configuration options

- Operating System (OS): Linux (most popular), Windows and Mac OS
- How much compute power and cores (CPU)
- How much Random Access Memory (RAM)
- How much storage space:
  - Network-attached (EBS and EFS)
  - hardware (EC2 instance store)
- Network attached to EC2 instance: What kind of IP do you want, do you want the network card to be fast
- Firewall rules: security group
- Bootstrap script (configure at first launch): EC2 user data

## EC2 User Data

- It is possible to bootstrap our instances using an EC2 User Data Script
- Bootstrapping means launching commands when a machine starts
- That script is run only once when the instance first starts and then is never run again
- EC2 user data is used to automate boot tasks such as:
  - Installing updates
  - Installing software
  - Download common files from the internet
  - Anything you can think of
- The EC2 user data script runs with the root user

![EC2 Instance Types Examples](Images/EC2_Instance_Types.png)

t2.micro is part of the AWS free tier (upto 750 hours per month)

## Hands On: Launching our first EC2 instance running Linux

1. Go into the EC2 Console
2. Click on `Instances` on the left-hand side
3. Click on `Launch Instances`
4. You can now name and tag your instance, for example, `test instance`
5. We are going to use the ones from `Quick Start`. Here, we will be using `Amazon Linux` which is provided by AWS.
6. Then we will select a Free Tier Eligible Image, for example `Amazon Linux 2 AMI (HVM)`
7. Select the 64-bit (x86) architecture
8. Next we need to choose an instance type. Select the free-tier eligible instance: `t2.micro`
9. Next you select the key-pair, which will be used if you are going to SSH, which we are. Create a new key-pair or use an existing one if you have one. Specify the key pair type (`RSA` by default) and the private key file format (.pem for MacOS, Linux and Windows 10, .ppk for Windows 8.1 and below). This will download a private key file to your machine
10. Now, back in the `Launch an Instance` section, when you scroll to the end, you will find `User data - Optional`. This is where we will pass our script (some commands) to our EC2 instance to execute only and only on the first launch

    ```python
    #!/bin/bash
    # Use this for your user data (script from top to bottom)
    # install httpd (Linux 2 version)
    yum update -y
    yum install -y httpd
    systemctl start httpd
    systemctl enable httpd
    echo "<h1>Hello World from $(hostname -f)</h1>" > /var/www/html/index.html
    ```

11. Finally click on `Launch Instance`. You can then go back to the `Instances` page and search for your instance. Click on it and it will provide you with details, you shall be using the public IPv4 to connect to your Instance.

